\section{\fontsize{20}{0}{\selectfont{Estado del Arte}}}
\rule{\textwidth}{1pt}\\

En este apartado se brinda un panorama general con respecto a los avances realizados en la temática de monitoreo, control remoto y visualización de datos en diferentes áreas de la agricultura, los siguientes proyectos se usarán como guía para dar cumplimiento a los objetivos planteados en la sección \ref{objetivos}.\\

%\input{Cod/estado del arte v1}
La agricultura moderna debe utilizar las tecnologías y herramientas derivadas de las investigaciones y adelantos científicos para mitigar los grandes desafíos relacionados con la construcción de un futuro sostenible, dificultado con el aumento poblacional, la urbanización, la contaminación ambiental, la migración, y el cambio climático. Hay una amplia gama de aplicaciones posibles: gestión de maquinarias, vigilancia del ganado, piscicultura, cuidado forestal, cultivos urbanos, entre otras. Todas las tecnologías implicadas giran en torno al concepto del \textit{Internet de las Cosas} (IoT por sus siglas en ingles Internet Of Things) y ayudan a los agricultores a través de sistemas de apoyo a la toma de decisiones \cite{Cirani}. Uno de los elementos fundamentales para una aplicación de IoT es la visualización de los datos, debido a que permite la interacción del usuario con el entorno. Para que un laico se beneficie por completo de la revolución de IoT, se necesita crear una visualización atractiva y fácil de entender. Esto también permitirá a los formuladores de políticas convertir los datos en conocimiento, lo cual es fundamental para la toma rápida de decisiones \cite{Gubbi}.\\

En \cite{Dominguez} y \cite{Cadena}, se diseñó e implementó una red de sensores para el monitoreo de cultivos de alfalfa y monitoreo continuo de variables ambientales respectivamente. El proceso de visualización de los datos se realizó a través de la plataforma IoT Ubidots de manera remota y en tiempo real. Una de las ventajas que ofrece esta plataforma es el soporte de varios protocolos de comunicación como HTTP, MQTT o TCP/UDP \cite{Ubidots}, la plataforma accedía a través del protocolo HTTP (para el caso presentado en \cite{Dominguez}) y MQTT (para el caso presentado en \cite{Cadena}) a un servidor creado de manera local, obtenía los datos y los mostraba por pantalla mediante tarjetas y gráficas previamente configuradas. Para el almacenamiento de la información proveniente de los diferentes nodos sensores en ambos casos se usó un sistema de almacenamiento basado en MySQL de manera local por medio de un ordenador de placa simple. En la Figura \ref{art1} se presenta la interfaz gráfica de usuario para el sistema propuesto en \cite{Dominguez}, donde se observa el comportamiento de las variables de temperatura, humedad del aire y humedad del suelo representadas en gráficas de tiempo. Del mismo modo, existen widgets que representan el promedio de las variables, los parámetros de configuración, un reloj en tiempo real y una imagen del cultivo.\\
Por otra parte, en \cite{Ching} y \cite{Piamba}, se realizó una propuesta similar de monitoreo para casas de cultivo y  una piscicultura de truchas en el año 2020. En este caso, para la visualización de los datos se adoptó el uso de la plataforma ThingsBoard la cual proporciona de manera nativa una base de datos SQL en Postger que se empleó para el almacenamiento de los datos recolectados por los sensores desplegados en campo. La transmisión de información se realizó a través del protocolo MQTT debido a que dicho protocolo para redes IoT presenta menos carga en comparación con HTTP \cite{MQTT}. 
\begin{figure}[H]
	\centering
	\shadowbox{\includegraphics[width=0.88\textwidth]{art1}}
	\caption{Visualización de datos a través de la plataforma Ubidots \cite{Dominguez}.}
	\label{art1}
\end{figure}
Por limitaciones de conectividad a internet en \cite{Ching} se implementó el entorno de monitoreo de manera local, es decir, no era posible acceder a la información fuera de la red de área local (LAN por sus siglas en ingles Local Network Area). Por el contrario, en \cite{Piamba} se visualizó los datos en campo mediante una pantalla de cristal líquido (LCD por sus siglas en ingles Liquid Crystal Display) conectada directamente al microcontrolador mediante el protocolo UART. y de manera remota a través de la plataforma ThingsBoard.\\

En los 4 proyectos descritos anteriormente se observa el uso común de las plataformas Ubidots y ThingsBoard, aunque en el mercado actual existen muchas más alternativas tanto Open Source como Sentilio, Thinger.io, Grafana o alternativas de pago como ThingSpeak cada una con diversas características, ventajas, desventajas y capacidad de adaptarse a los requerimientos del usuario. A continuación, se describen algunos proyectos que usaron dichas alternativas.\\

En \cite{Plazas} y \cite{Barrionuevo}, se empleó el uso de las plataformas Sentilio y Thinger.io respectivamente para el monitoreo de variables ambientales en cultivos verticales y de tomate cherry. Ambas alternativas optaron por el uso de bases de datos en un entorno remoto, es decir, todos los datos recolectados y procesados eran enviados directamente hacia un servidor donde posteriormente la plataforma IoT correspondiente debía acceder a ellos por medio del protocolo HTTP. En \cite{Plazas}, el despliegue de la plataforma Sentilio se realizó desde una máquina virtual (proporcionada por la página web oficial de Sentilio) instalada en un servidor Linux perteneciente al grupo de investigación SISTEMIC, ubicado en la sede central de la Universidad de Antioquia, Colombia. Con dicho servidor desplegado fue posible publicar las medidas registradas por los sensores con el método POST del protocolo HTTP, para realizar dicha publicación el Gateway debía enviar una petición hacia la URL ``\textit{http://sistemic.udea.edu.co:4000/data/Cultivo1}'' junto con la información de los sensores en el \textit{``boby''} del mensaje. Además, al usar el protocolo HTTP fue posible utilizar los diferentes métodos que este ofrece como PUT, DELETE o GET para actualizar, eliminar u obtener datos respectivamente. En función a los datos enviados por el Gateway, la plataforma Sentilio permitía mostrar la información por pantalla como se observa en la Figura \ref{sentilio}, o si por el contrario la plataforma Sentilio enviaba una petición para realizar un cambio en los estados de los relés o tiempos de muestreo, el Gateway se encarga de enviar la información a los nodos sensores correspondientes.
\begin{figure}[H]
	\centering
	\shadowbox{\includegraphics[width=0.88\textwidth]{sentilio}}
	\caption{Visualización de datos a través de la plataforma Sentilo \cite{Plazas}.}
	\label{sentilio}
\end{figure}
El sistema de monitoreo en un laboratorio de experimentación de cannabis usando tecnologías de IoT presentado en \cite{Castrillon} hace empleo de la plataforma Grafana, y a diferencia de las propuestas anteriormente expuestas hace uso de dos bases de datos, una en un entorno local y otra en la nube a través de Google Cloud. Para almacenar la información en las bases de datos se creó una tabla en MySQL y se publicaron los datos desde el un nodo central o Gateway (ESP8266) por medio del protocolo MQTT. Es decir, el Gateway guardaba los  datos del sensor, se conecta a un servidor y envía a través de MQTT un mensaje. Este se enviaba paralelamente al servidor local y en la nube. Lo anterior permitió tener un respaldo de los datos en caso de algún incidente en alguna las dos bases. También se creó un conjunto de alertas que indicaban cuando el cultivo se salía de un rango establecido, el usuario podía acceder a una dashboard en tiempo real para la visualización y control de las variables ambientales a medir por medio de Grafana.\\
Finalmente, la plataforma ThingSpeak fue implementada en el prototipo de monitoreo en cultivos de arroz presentado en \cite{Mosquera}. El diseño del prototipo usó como base para la visualización de datos enviados por los sensores la plataforma IoT ThingSpeak la cual permite recopilar, observar y analizar flujos de información en tiempo real en la nube y proporcionar visualizaciones instantáneas de los datos enviados. Una caracteriza de dicha plataforma es contar con una interfaz de programación de aplicaciones (API por sus siglas en ingles application programming interface) para almacenar y recuperar datos orientados a objetos vía HTTP sobre Internet o sobre una LAN. Además, una característica diferencial con respecto a las demás plataformas es que se puede integrar con el sistema de cómputo numérico Matlab para crear algoritmos que hacen que los cultivos sean más inteligentes. Con dicha plataforma se logró visualizar en tiempo real los datos enviados por los sensores cada 5 minutos a través del dashboard de ThingSpeak de una manera gráfica y amigable para el usuario. Implementó el uso de alertas mediante correos electrónicos y tweets gracias a la plataforma IoT. Y finalmente, logró el control remoto para el encendido y apagado de una bomba de agua mediante el protocolo HTTP.\\

Hasta el momento todas las soluciones vistas presentan un común denominador y es la visualización por medio de la misma plataforma IoT. Lo anterior puede presentar una desventaja significativa cuando se presenta alguno de los siguientes casos: 
\begin{itemize}
	\item La plataforma no tiene la opción manipular los elementos gráficos del interfaz, es decir, entrega un panel por defecto y no hay manera de manipularlo.
	\item La plataforma capa algunas funciones de personalización de la interfaz gráfica para el usuario final en versiones gratuitas.
	\item La plataforma no es lo suficientemente intuitiva para que una persona, la cual no esté familiarizada con la manipulación de dispositivos electrónicos pueda navegar libremente en ella.
\end{itemize}
Partiendo de la anterior premisa, tener la  libertad en diseñar desde cero todo el apartado gráfico con el que usuario va a interactuar día a día para abastecerse de información sobre su cultivo y tomar decisiones en función de dicha información representa un valor agregado. A continuación, se presentan 3 soluciones para la representación de información en cultivos que no hacen uso de ninguna plataforma IoT o la usan como intermediaría para posteriormente mostrar los datos en una aplicación diseñada desde cero y ajustada al usuario final, para que este tenga una rápida curva de aprendizaje.\\

En \cite{Quico}, diseñaron e implementaron un framework para el monitoreo de temperatura en tiempo real completo, configurable, escalable y de bajo costo aplicando la tecnología IoT. La arquitectura de red propuesta fue la mostrada en la Figura \ref{art5}, la cual cuenta con tres capas.
\begin{itemize}
	\item La ``\textit{capa recolectora de datos}'' que se encarga de recolectar los datos del cultivo y enviarlos al microcontrolador nodeMCU, mediante el cual se recibe la data y se envía a la capa de nube a través de su módulo WIFI ESP8266 hacia el servicio IoT Platform de IBM Cloud.
	\item La ``\textit{capa Nube}'' que hace uso del servicio de IoT Platform de IBM Cloud, el uso de Heroku Cloud para el alojamiento de la base de datos en MySQL y del RESTful Api, uso del servicio Firebase de Google Cloud para el alojamiento de la aplicación web desarrollada con Angular. Esta capa recibe la data enviada por la capa anterior y mediante el uso de un aplicativo NodeRed alojado en IBM Cloud realiza el almacenamiento de los datos leídos en la base de datos en la nube a través del uso del RESTful Api.
	\item La ``\textit{capa de aplicación}'' incluye el uso de un navegador web por medio de un dispositivo móvil o un equipo de escritorio donde los usuarios y el administrador del cultivo pueden usar el aplicativo y acceder a módulos de la solución de acuerdo al perfil que tenga.
\end{itemize}
\begin{figure}[H]
	\centering
	\shadowbox{\includegraphics[width=0.88\textwidth]{art5}}
	\caption{Framework propuesto en \cite{Quico}.}
	\label{art5}
\end{figure}
Como resultado se obtuvo un aplicativo totalmente responsive, lo cual permitió ser consultado desde diferentes dispositivos por el usuario y/o el administrador según lo requiriera.\\
En \cite{Baloria} y \cite{Berrios}, implementaron un sistema de monitoreo remoto sin hacer uso de ninguna plataforma IoT. El desarrollo del proyecto se realizó a través de la integración de una red de sensores ubicada en el sitio de estudio, una base de datos en la nube (Firebase en \cite{Berrios}) y el diseño de una aplicación web y móvil respectivamente para la realización de labores de administración o supervisión. La red de sensores envia los datos procesados hacia un Gateway, el cual accede y escribe por medio del protocolo HTTP en la base de datos alojada en la nube los datos obtenidos. Una vez dispuestos los datos en la nube las aplicaciones diseñadas acceden a ellos igualmente por HTTP y representan los datos de una manera adecuada para el usuario. Cabe resaltar que en \cite{Berrios} se logró manipular el estado de actuadores de manera remota.\\

En general, los proyectos anteriormente descritos como resultado final se obtuvo un sistema automático de monitoreo y supervisión de parámetros ambientales básicos que logra una reducción significativa del tiempo empleado para monitorear y analizar el estado de los cultivos en comparación con la forma manual. Los sistemas permitieron una correcta toma de decisiones para la mejora en la calidad de la producción y una visualización de los datos a través de una interfaz gráfica amigable y de fácil manejo para evaluar el desempeño de las variables con el paso del tiempo.\\

Una vez observadas las diferentes soluciones actuales en el mercado junto con sus respectivas limitantes, es posible concluir que para lograr el cumplimiento de los objetivos plateados en la sección \ref{objetivos} se debe hacer uso de una plataforma IoT Open Source que actué como intermediaría entre la comunicación del nodo central de la la red de sensores y una base de datos alojada en la nube como Firebase o Heroku. Lo anterior con el objetivo de acceder a esta por medio de una aplicación web 100\% responsive para no tener como limitante el sistema operativo o dispositivo que pueda tener el usuario final. La aplicación web debe contar con una interfaz gráfica intuitiva y usar el protocolo HTTP debido a que este es soportado por prácticamente todos los sistemas actuales.















\newpage
